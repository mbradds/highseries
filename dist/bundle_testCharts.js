(()=>{var t={123:t=>{function e(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}}(t,e)||function(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function o(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var a=0;function s(t){return"__private_"+a+++"_"+t}var u=s("getUnique"),c=s("seriesProperties"),l=s("properxName"),f=s("yValues"),d=s("nonTidyOperation"),h=s("tidyOperation"),y=s("findDataType"),p=function(){function t(e){var r=e.df,n=e.chartType,i=void 0===n?void 0:n,o=e.xCol,a=void 0===o?void 0:o,s=e.yCols,p=void 0===s?void 0:s,C=(e.filters,e.transform),O=void 0===C?void 0:C,T=e.valuesCol,j=void 0===T?void 0:T,P=e.colors,S=void 0===P?void 0:P,A=e.xName,k=void 0===A?"x":A;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),Object.defineProperty(this,y,{value:w}),Object.defineProperty(this,h,{value:g}),Object.defineProperty(this,d,{value:b}),Object.defineProperty(this,f,{value:x}),Object.defineProperty(this,l,{value:_}),Object.defineProperty(this,c,{value:m}),Object.defineProperty(this,u,{value:v}),this._df=r,this._chartType=i,this._xCol=a,this._yCols=p,this._filters,this._transform=O,this._valuesCol=j,this._colors=S,this._xName=k,this._series=void 0}var e,n;return e=t,(n=[{key:"filter",value:function(t){for(var e=this,n=function(){var t=r(o[i],2),n=t[0],a=t[1];Array.isArray(a)?a.map((function(t){e._df=e._df.filter((function(e){return e[n]==t}))})):e._df=e._df.filter((function(t){return t[n]==a}))},i=0,o=Object.entries(t);i<o.length;i++)n();return this._df}},{key:"sort",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",r=[];return"asc"==e?r=this._df.slice().sort((function(e,r){return r[t]-e[t]})):"desc"==e&&(r=this._df.slice().sort((function(e,r){return e[t]-r[t]}))),this._df=r,this._df}},{key:"generateSeries",value:function(){return o(this,y)[y](this._yCols,this._valuesCol),"non-tidy"==this._dataType?this._series=o(this,d)[d](this._xCol,this._yCols,this._transform,this._colors,this._xName):this._series=o(this,h)[h](this._xCol,this._yCols,this._transform,this._colors,this._valuesCol,this._xName),this._series}},{key:"df",get:function(){return this._df},set:function(t){this._df=t}},{key:"chartType",get:function(){return this._chartType},set:function(t){this._chartType=t}},{key:"colors",get:function(){return this._colors},set:function(t){this._colors=t}},{key:"xCol",get:function(){return this._xCol},set:function(t){this._xCol=t}},{key:"yCols",get:function(){return this._yCols},set:function(t){this._yCols=t}},{key:"filters",get:function(){return this._filters},set:function(t){this._filters=t}},{key:"transform",get:function(){return this._transform},set:function(t){this._transform=t}},{key:"valuesCol",get:function(){return this._valuesCol},set:function(t){this._valuesCol=t}},{key:"xName",get:function(){return this._xName},set:function(t){this._xName=t}}])&&i(e.prototype,n),t}(),v=function(t){for(var e,r={},n=[],i=0;e=this._df[i++];){var o=e[t];o in r||(r[o]=1,n.push(o))}return n},m=function(t){return void 0!==t?function(t,e,r){return{name:t,data:e,color:r[t]}}:function(t,e,r){return{name:t,data:e}}},_=function(t){return void 0!==t?t:null==this._chartType?(this.xName="x","x"):void(["line","area"].includes(this._chartType)&&(this.xName="x"))},x=function(t){if(!t)return function(t,e){return t[e]};if(t&&t.hasOwnProperty("decimals")&&!t.hasOwnProperty("operator"))return function(e,r){return null!==e[r]?+e[r].toFixed(t.decimals):e[r]};if(t&&t.hasOwnProperty("operator"))if(t.hasOwnProperty("decimals")){if("*"==t.operator)return function(e,r){return null!==e[r]?+(e[r]*t.conversion).toFixed(t.decimals):e[r]};if("/"==t.operator)return function(e,r){return null!==e[r]?+(e[r]/t.conversion).toFixed(t.decimals):e[r]};if("+"==t.conversion)return function(e,r){return null!==e[r]?+(e[r]+t.conversion).toFixed(t.decimals):e[r]};if("-"==t.conversion)return function(e,r){return null!==e[r]?+(e[r]-t.conversion).toFixed(t.decimals):e[r]}}else{if("*"==t.operator)return function(e,r){return null!==e[r]?+e[r]*t.conversion:e[r]};if("/"==t.operator)return function(e,r){return null!==e[r]?+e[r]/t.conversion:e[r]};if("+"==t.conversion)return function(e,r){return null!==e[r]?+(e[r]+t.conversion):e[r]};if("-"==t.conversion)return function(e,r){return null!==e[r]?+(e[r]-t.conversion):e[r]}}},b=function(t,n,i,a,s){var u=this,d={},h={};n.map((function(t){d[t]=[],h[t]=0})),o(this,l)[l](s);var y=o(this,f)[f](i);this._df.map((function(r){n.map((function(n){var i;d[n].push((e(i={},u._xName,r[t]),e(i,"y",y(r,n)),i)),h[n]=h[n]+r[n]}))}));for(var p=[],v=o(this,c)[c](a),m=0,_=Object.entries(d);m<_.length;m++){var x=r(_[m],2),b=x[0],g=x[1];0!==h[b]&&p.push(v(b,g,a))}return p},g=function(t,r,n,i,a,s){var d=this,h=o(this,u)[u](r),y=o(this,f)[f](n),p=o(this,c)[c](i);return o(this,l)[l](s),h.map((function(n){var o=d._df.filter((function(t){return t[r]==n})).map((function(r){var n;return e(n={},d._xName,r[t]),e(n,"y",y(r,a)),n}));return p(n,o,i)}))},w=function(t,e){Array.isArray(t)&&null==e?this._dataType="non-tidy":this._dataType="tidy"};t.exports=p}},e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports}(()=>{function t(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}}(t,r)||function(t,r){if(t){if("string"==typeof t)return e(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?e(t,r):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var n=r(123),i=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),JSON.parse(e.responseText)},o=i("../test_data/non-tidy.json"),a=i("../test_data/tidy.json"),s=function(t,e){return new Highcharts.chart(e,{chart:{type:"line",zoomType:"x",borderWidth:1},tooltip:{shared:!0},xAxis:{type:"datetime",crosshair:!0},series:t})},u={Marine:"Red",Pipeline:"Blue",Railway:"Green",Truck:"Yellow"},c={Product:"Propane",Origin:"Canada"},l=t(function(t,e){var r=performance.now(),i=new n({df:t,chartType:"line",colors:u});i.xCol="Period",i.yCols="Mode of Transportation",i.valuesCol="Volume (Mb/d)",i.filter(e);var o=i.generateSeries(),a=s(o,"container-tidy"),c=performance.now();return a.update({title:{text:"Tidy load time: ".concat((c-r).toFixed(1)," milliseconds")}}),[a,i]}(a,c),2),f=l[0],d=l[1],h=t(function(t,e){var r=performance.now(),i=new n({df:t,chartType:"line",colors:u});i.xCol="Period",i.yCols=["Marine","Pipeline","Railway","Truck"],i.filter(e);var o=i.generateSeries(),a=s(o,"container-nonTidy"),c=performance.now();return a.update({title:{text:"Non-tidy load time: ".concat((c-r).toFixed(1)," milliseconds")}}),[a,i]}(o,c),2),y=h[0],p=h[1];document.getElementById("select-product").addEventListener("change",(function(t){c.Product=t.target.value;var e=performance.now();d.df=a,d.filter(c),f.update({series:d.generateSeries(),title:{text:"Tidy update time ".concat((performance.now()-e).toFixed(1)," milliseconds")}});var r=performance.now();p.df=o,p.filter(c),y.update({series:p.generateSeries(),title:{text:"Non-tidy update time ".concat((performance.now()-r).toFixed(1)," milliseconds")}})}))})()})();